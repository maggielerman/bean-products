/*  Rapid+JS v4.0.0 Released on 2018-05-15T16:12Z | (c) Yottaa, Inc. | https://www.yottaa.com/rapidjs-license */ var Yo=function(h,I){return I(h)}('undefined'!==typeof window?window:this,function(h,I){function y(){var a='0123456789abcdef'.split(''),b=[],c=Math.random,d;b[8]=b[13]=b[18]=b[23]='-';b[14]='4';for(var f=0;36>f;f++)b[f]||(d=0|16*c(),b[f]=a[19==f?d&3|8:d&15]);return b.join('')}function z(a){return g.rum.key+'-'+a}function N(a){if(!0==e.isIE('8'))return e.log('IE 8 detected we will not send data back for this browser currently.'),!1;if(!0===g.rum.post){var b=new XMLHttpRequest;b.onreadystatechange= function(){4==this.readyState&&e.log('Rum data response received',this.status)};b.open('POST',g.rum.beaconUrl,!0);b.setRequestHeader('Content-type','application/json');b.send(JSON.stringify(a))}else{var b=document.createElement('img'),c=g.rum.beaconUrl+'?';e.log('Sending timing data to ',c);for(var d in a)c+=d+'='+encodeURIComponent(a[d])+'&';b.src=c}}function J(a){for(var b=0;b<g.delayed.length;b++){var c=g.delayed[b];if(c.src==a||c.srcAttr==a)return c}return null}function E(a,b,c,d){a={lastByteTime:c.duration, implementationType:'dom',type:a,zone:b,resourceName:c.name,resourceSizeBytes:c.decodedBodySize};c=J(c.name);null!=c&&(a.delayedType=c.orgDelayType,a.delayedValue=c.delayValue);r.def(d)&&(a.stack=d);return a}var A={},g={defaultDelay:5E3,defaultType:'none',log:!1,throttle:20,sequenceXHR:!1,sequenceWrites:!1,sendTimingData:!1,timingDataURL:'',offset:100,loadOnDOM:!1,scan:['script','img'],resources:[],abTesting:[],write:[],intervalID:null,lazyCheckSize:!0,pre:'data-yo-',srcAttrs:['data-yo-src','data-yo-srcset'], afterShockLoaded:!1,optimizeIE:!0,delayed:[]},e={log:function(){if(g.log&&(e.def(h)&&e.def(h.console)&&e.def(h.console.log)||e.def(self)&&e.def(self.console)&&e.def(self.console.log))){for(var a='',b=0;b<arguments.length;b++){var c=arguments[b],d='';'object'===typeof c&&c&&e.def(c.nodeName)?(d=c.yo_src?'yo_src '+c.yo_src:c.src?'src '+c.src:'id '+c.id,a+='['+c.nodeName+', '+d+'] '):a+=c+' '}console.log('Yo.utils.log: '+a)}},def:function(a){return'undefined'!=typeof a},undef:function(a){return!e.def(a)}, isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},decodeSafeString:function(a){return decodeURIComponent(a)},getCookie:function(a){for(var b=document.cookie.split(';'),c=0;c<b.length;c++){var d=b[c];if(-1!=d.indexOf(a)){for(;' '==d.charAt(0);)d=d.substring(1,d.length);return d.substring(a.length+1,d.length)}}return null},setCookie:function(a,b,c){var d='';c&&(d=new Date,d=new Date(d.getTime()+1E3*c),d='; expires='+d.toGMTString());document.cookie=a+'='+b+d+'; path=/';return!0},addEvent:function(a, b,c){a.attachEvent?a.attachEvent('on'+b,c):a.addEventListener&&a.addEventListener(b,c,!1)},removeEvent:function(a,b,c){a.detachEvent?a.detachEvent('on'+b,c):a.removeEventListener(b,c,!1)},metaDataValue:function(a,b){var c=document.getElementsByName(a);return null!=c&&1==c.length?1==arguments.length?c[0].getAttribute('content'):c[0].setAttribute('content',b):null},matchUrl:function(a,b){if(null==a||null==b)return!1;r.log('Match src',b,'and url',a);return'string'===typeof a&&-1!=b.indexOf(a)||null!= b.match(a)}},n={},v={},O=1,K={},F=[];_executeCallback=function(a,b){setTimeout(function(){a.callback.call(a.context,b.message,b.topic)},0)};_addWildcards=function(a,b){for(var c=0;c<F.length;c++){var d=F[c];null!=b.topic.match(d.topic)&&a.push(d)}};n.subscribe=function(a){a.id=++O;e.undef(a.priority)&&(a.priority=0);e.undef(a.priority)&&(a.priority=0);'string'===typeof a.topic&&-1!=a.topic.indexOf('*')&&(a.topic=new RegExp(a.topic.replace(/\*/g,'.*')));if('string'===typeof a.topic){a.topic=a.topic.toLowerCase(); !0==e.undef(v[a.topic])&&(v[a.topic]=[]);v[a.topic].push(a);v[a.topic].sort(function(a,b){return b.priority-a.priority});var b=K[a.topic];e.def(b)&&a.callback.call(b.context,b.message,b.topic)}else F.push(a);e.log('_pubsub.subscribe',a.topic,a.id);return a.id};n.publish=function(a){a.topic=a.topic.toLowerCase();var b=v[a.topic],b=!0==e.undef(b)?[]:b.slice(0);_addWildcards(b,a);a.persistent&&(K[a.topic]=a);if(!0==e.def(b)){for(var c=[],d=0;d<b.length;d++){var f=b[d],h=!0;!0==a.async?_executeCallback(f, a):(h=f.callback.call(f.context,a.message,a.topic),c.push(h));e.log('_pubsub.publish',f.topic,f.id);if(!1==h&&!0===a.cancellable)break}return c}e.log('_pubsub.publish',a.topic,'no callbacks');return 0};n.unsubscribe=function(a){for(var b in v)for(var c=v[b],d=0;d<c.length;d++)if(c[d].id==a)return c.splice(d,1),e.log('_pubsub.unsubscribe','found'),!0;e.log('_pubsub.unsubscribe','not found');return!1};var r=e;r.rewrite=function(a){var b=r.metaDataValue('resource.version'),c=r.metaDataValue('cdn.hostname'), d=r.metaDataValue('profile.id');return location.protocol+c+'/'+d+'/'+location.hostname+'/'+b+(0!=a.indexOf('/')?'/':'')+a};r.select=function(a){var b=-1;if(null==a||1==a.length)return null;if('document'==a)return document;if('window'==a)return h;if(r.def(a.nodeName))return a;if('.'==a[0])return a=document.getElementsByClassName(a.substring(1)),0<a.length?a[0]:null;if(-1!=(b=a.indexOf('['))){var c=a.substring(0,b),d=a.substring(b+1),f=d.indexOf(']'),e=d.indexOf('['),d=d.substring(0,f),l=0,f=-1,g=[], p=null;if(-1!=(l=d.indexOf('~')))f=2;else if(-1!=(l=d.indexOf('*')))f=1;else if(-1!=(l=d.indexOf('=')))f=0;else return null;if(-1!=e){e=a.substring(b+1+e+1);b=e.indexOf(']');try{e=parseInt(e.substring(0,b))}catch(s){}}var k=d.substring(0,l),l=d.substring(l+1);2==f&&(p=new RegExp(l));c=document.getElementsByTagName(c);for(b=0;b<c.length;b++){var m=0<k.length?c[b].getAttribute(k):c[b].innerHTML;0==f&&m==l?g.push(c[b]):1==f&&null!=m&&-1!=m.indexOf(l)?g.push(c[b]):2==f&&null!=m&&-1!=m.search(p)&&g.push(c[b])}r.log(a, d,k,l,0==g.length?g.length:g[0]);return-1!=e?e<g.length?g[e]:null:g[0]}'#'==a[0]&&(a=a.substring(1));return document.getElementById(a)};r.writeHTML=function(a,b,c){var d=document.createElement('div');d.innerHTML='string'===typeof b?b:b.innerHTML;for(b=d.childNodes;0<b.length;)if('script'==b[0].nodeName.toLowerCase())if(b[0].src)Yo.sequence.script(d.removeChild(b[0]).src).load();else try{eval(d.removeChild(b[0]).innerHTML)}catch(e){r.log(e)}else'insert'==c?a.parentNode.insertBefore(d.removeChild(b[0]), a):a.appendChild(d.removeChild(b[0]))};r.contains=document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:document.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!1)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};r.updateHeadItemAttributes=function(a,b,c){0>a&&(document.cookie='yo-disable-instanton=true;Max-Age=2',h.location.reload(!0));a=document.documentElement.getElementsByTagName('head')[0].children[a]; for(var d=0;d<b.length;d++)a.removeAttribute(b[d]);for(var e in c)a.setAttribute(e,c[e])};r.replaceHeadItemContent=function(a,b){0>a&&(document.cookie='yo-disable-instanton=true;Max-Age=2',h.location.reload(!0));document.documentElement.getElementsByTagName('head')[0].children[a].textContent=b};r.isIE=function(a){var b=navigator.userAgent;return b&&a&&11==parseInt(a)&&-1!=b.indexOf('rv:11')?!0:b&&a&&-1!=b.indexOf('MSIE '+a)?!0:b&&(-1!=b.indexOf('MSIE')||-1!=b.indexOf('rv:11'))};r.inArray=function(a, b,c){var d;if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1};var w={releaseDate:'2018-05-15',errors:{has:!1},config:g},B=function(){return w};n.subscribe({topic:'core/configure',callback:function(a){B.config=g}});n.subscribe({topic:'core/start',callback:function(){B.config=g}});e.addEvent(h,'error',function(a){var b=a.message,c=a.lineno,d=a.filename;3==arguments.length&&(b=arguments[0], d=arguments[1],c=arguments[2]);e.log('errorCapture',b,c,d);n.publish({topic:'core/js/error',persistent:!0,message:{message:b,implementationType:'dom',resourceName:d,lineNumber:c,stack:a&&a.error&&a.error.stack?a.error.stack:'',collectionTimestamp:(new Date).getTime()}});w.errors={has:!0}});var q={},L=[],C=[],x={},G='unknown',M=y(),H={};q.initialize=function(a,b,c,d,f){g.rum={beaconUrl:a,requests:b,key:c,post:!0,advanced:{performanceTime:1500,blockingTime:750,violationSize:1024E3,domInteractiveCoef:200, domContentLoadedEventCoef:150,domCompleteCoef:100,loadEventCoef:50}};e.def(f)&&(f.performanceTime&&(g.rum.advanced.performanceTime=f.performanceTime),f.blockingTime&&(g.rum.advanced.blockingTime=f.blockingTime),f.violationSize&&(g.rum.advanced.violationSize=f.violationSize));h.performance&&h.performance.setResourceTimingBufferSize&&h.performance.setResourceTimingBufferSize(500)};q.captureStack=function(){return Error().stack};q.set=function(a,b){x[a]=b};q.get=function(){return x};n.subscribe({topic:'core/load', callback:function(){e.def(g.rum)&&e.def(g.rum.beaconUrl)&&(setTimeout(function(){n.publish({topic:'rum/send',message:w.rum})},100),e.addEvent(h,'unload',function(){e.log('unload window event triggered');a:if(!1!=e.def(h.performance)&&!1!=e.def(h.performance.getEntries)){try{if(!h.localStorage||!h.localStorage.getItem)break a}catch(a){e.log('localStorage was not available');break a}for(var b=[],c=h.performance.timing,d=0,f=0,n=c.domInteractive-c.navigationStart,l=c.domContentLoadedEventEnd-c.navigationStart, P=c.domComplete-c.navigationStart,p=c.loadEventEnd-c.navigationStart,s=h.performance.getEntries(),c=s.length,k=0;k<c;k++){var m=s[k],u=m.startTime,t=0;u<=n?(f+=g.rum.advanced.domInteractiveCoef,t=1):u<=l?(f+=g.rum.advanced.domContentLoadedEventCoef,t=2):u<=P?(f+=g.rum.advanced.domCompleteCoef,t=3):u<=p?(f+=g.rum.advanced.loadEventCoef,t=4):0<m.duration&&(d+=m.duration);u=H[m.name];0!=t&&m.duration>g.rum.advanced.blockingTime?C.push(E(4,t,m,u)):0==t&&m.duration>g.rum.advanced.performanceTime?C.push(E(0, t,m,u)):m.decodedBodySize>g.rum.advanced.violationSize&&C.push(E(1,t,m,u));m.toJSON&&(m=m.toJSON(),m.implementationType='dom',r.def(u)&&(m.stack=u),t=J(m.name),null!=t&&(m.delayedType=t.orgDelayType,m.delayedValue=t.delayValue),b.push(m))}if(h.performance.getEntriesByName)for(n=document.getElementsByTagName('script'),k=0;k<n.length;k++)null!=n[k].src&&''!=n[k].src&&(l=n[k].src,0==l.indexOf('//')&&(l=h.location.protocol+l),s=h.performance.getEntriesByName(l),null!=s&&0!=s.length||C.push(E(2,0,{name:n[k].src, duration:0,decodedBodySize:0},H[n[k].src])));k=localStorage.getItem(z('rapid-js-qoe-5'));null==k?k={sessionTimeSaved:d,journeyTime:d}:(k=JSON.parse(k),k={sessionTimeSaved:(new Date).getTime()>k.collectionTimestamp+18E5?d:k.sessionTimeSaved+d,journeyTime:k.journeyTime+d});k.entries=c;k.timeSaved=d;k.score=f;k.pageMeasured=h.location.href;k.pageMeasuredCategory='';k.violations=C;!0===g.rum.requests&&(k.resourceTiming=b);k.jsErrors=L;k.pageMeasuredUuid=M;k.collectionTimestamp=(new Date).getTime();k.commonDimensions= {};for(var q in x)k.commonDimensions[q]=x[q];k.commonDimensions.optState||(k.commonDimensions.optState=G);localStorage.setItem(z('rapid-js-qoe-5'),JSON.stringify(k))}}))}});n.subscribe({topic:'sequence/captured',callback:function(a,b){var c='';a.open_args?c=a.open_args[1]:a.newNode&&a.newNode.src?c=a.newNode.src:a.delayed&&a.delayed.newNode&&a.delayed.newNode.src?c=a.delayed.newNode.src:a.src&&(c=a.src);H[c]=q.captureStack()}});n.subscribe({topic:'core/js/error',callback:function(a,b){L.push(a)}}); n.subscribe({topic:'rum/send',callback:function(a,b){for(var c=g.rum.key?g.rum.key:e.getCookie('yo-rum-key'),d=0,f=0,r=0,l=0;l<g.delayed.length;l++){var q=g.delayed[l];'none'!=q.orgDelayType&&(G='active',q.newNode&&q.newNode.nodeName?'img'==q.newNode.nodeName.toLowerCase()?f++:'script'==q.newNode.nodeName.toLowerCase()&&'attributesrc'!=q.type&&d++:q.me&&q.me.nodeName&&'script'==q.me.nodeName.toLowerCase()&&r++)}c={siteKey:null!=c?c:h.location.hostname,uuid:M,formatVersion:'3',releaseDate:'2018-05-15', requestType:'navigation',fullPageURL:document.location.href,pageCategory:'',userAgent:navigator.userAgent,pageTitle:document.title,isNavigationSupported:e.def(h.performance)&&e.def(h.performance.timing)&&e.def(h.performance.timing.toJSON),isResourceTimingSupported:e.def(h.performance)&&e.def(h.performance.getEntries),isPaintTimingSupported:e.def(h.performance)&&e.def(h.performance.getEntries),yOptimizations:e.metaDataValue('X-Yottaa-Optimizations'),eventTimestamp:(new Date).getTime(),sequencing:{numScriptsSequenced:d, numImagesSequenced:f,numBlocksSequenced:r,numDelayedObjects:g.delayed.length},commonDimensions:{}};B.geo&&(c.geo=B.geo);for(var p in x)c.commonDimensions[p]=x[p];c.commonDimensions.optState||(c.commonDimensions.optState=G);try{if(h.localStorage&&localStorage.getItem){var s=localStorage.getItem(z('rapid-js-visitor-3'));if(null!=s){var s=JSON.parse(s),k=(new Date).getTime()>s.visitorTimestamp+18E5;c.visitor={visitorTimestamp:(new Date).getTime(),numVisitorPageViews:s.numVisitorPageViews+1,numSessionPageViews:k? 1:s.numSessionPageViews+1,visitorId:s.visitorId?s.visitorId:y(),numSessions:k?s.numSessions+1:s.numSessions,sessionId:k?y():s.sessionId,bandwidth:''}}else c.visitor={visitorTimestamp:(new Date).getTime(),numVisitorPageViews:1,numSessionPageViews:1,numSessions:1,visitorId:y(),sessionId:y(),bandwidth:''};localStorage.setItem(z('rapid-js-visitor-3'),JSON.stringify(c.visitor));var m=localStorage.getItem(z('rapid-js-qoe-5'));null!=m&&(c.qoe=JSON.parse(m))}}catch(u){e.log('localStorage was not available')}!0== c.isNavigationSupported&&(c.navigationTiming=h.performance.timing.toJSON());c.isPaintTimingSupported=!1;c.paintTiming={};c.userTiming={};c.measureTiming={};if(h.performance&&h.performance.getEntriesByType){p=h.performance.getEntriesByType('paint');if(null!=p&&0<p.length)for(c.isPaintTimingSupported=!0,l=0;l<p.length;l++)c.paintTiming[p[l].name]=p[l].startTime;p=h.performance.getEntriesByType('mark');if(null!=p&&0<p.length)for(l=0;l<p.length;l++)c.userTiming[p[l].name]=p[l].startTime;p=h.performance.getEntriesByType('measure'); if(null!=p&&0<p.length)for(l=0;l<p.length;l++)c.measureTiming[p[l].name]=p[l].duration}w.rum=c;l=n.publish({topic:'rum/beforeSend',async:!1,message:w.rum});0!=l.length&&!1===l[0]||N(w.rum)}});var D=document;_loadCookieConfig=function(){var a=e.getCookie('yo-aftershock-config');if(null!=a&&0<a.length)try{a=eval(a),Yo.configure(a)}catch(b){}};_domready=function(){function a(a){b(a)}function b(a){('poll'===a||'readystatechange'===a.type)&&'complete'!==D.readyState||d||(d=!0,g.afterShockLoaded=!0,n.publish({topic:'core/load', async:!0,message:A,persistent:!0}))}function c(){try{D.documentElement.doScroll('left')}catch(a){setTimeout(c,50);return}b('poll')}var d=!1,f=!0;if('complete'===D.readyState)g.afterShockLoaded=!0,n.publish({topic:'core/load',async:!0,message:Yo,persistent:!0});else{if(D.createEventObject&&D.documentElement.doScroll){try{f=!h.frameElement}catch(q){}f&&c()}!0==g.loadOnDOM&&(e.addEvent(document,'DOMContentLoaded',b),e.addEvent(document,'readystatechange',b));e.addEvent(h,'load',a)}};n.subscribe({topic:'core/start', callback:function(){_loadCookieConfig();_domready()}});A={utils:e,pubsub:n,configure:{}.configure,rum:q,stats:B};q.only=!0;A.configure=function(a){if('string'===typeof a)a=a.split('key='),2==a.length&&q.initialize('https://qoe-1.yottaa.net/log-nt/event',0.05<Math.random(),a[1],!0);else for(var b in a)'resources'==b?g.resources=g.resources.concat(a.resources):g[b]=a[b]};n.publish({topic:'core/start',message:A});return A}); 